{"version":3,"sources":["all.js"],"names":["document","addEventListener","ele","querySelector","style","cursor","pos","top","left","x","y","mouseDownHandler","e","userSelect","scrollLeft","scrollTop","clientX","clientY","mouseMoveHandler","mouseUpHandler","dx","dy","removeProperty","removeEventListener","menuOpenBtn","linkBtn","querySelectorAll","menu","menuToggle","forEach","item","closeMenu","classList","contains","remove","add","console","clear","path","base","pdlist","data","productList","axios","get","then","response","products","renderCard","error","log","filter","target","value","category","tempData","push","renderData","str","images","id","title","origin_price","toLocaleString","price","innerHTML","nodeName","qt","pdid","dataset","content","ctData","product","quantity","addCart","post","productId","cartList","ctList","carts","finalTotal","done","dall","did","deleteOne","deleteAll","cartid","orderForm","fname","ftel","fmail","fadr","fpay","fbtn","length","alert","sname","stel","smail","sadr","spay","sendOrder","femail","faddress","fpayment","user","name","tel","email","address","payment","reset","message"],"mappings":"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","file":"all.js","sourcesContent":["// 預設 JS，請同學不要修改此處\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n  const ele = document.querySelector(\".recommendation-wall\");\r\n  ele.style.cursor = \"grab\";\r\n  let pos = { top: 0, left: 0, x: 0, y: 0 };\r\n  const mouseDownHandler = function (e) {\r\n    ele.style.cursor = \"grabbing\";\r\n    ele.style.userSelect = \"none\";\r\n\r\n    pos = {\r\n      left: ele.scrollLeft,\r\n      top: ele.scrollTop,\r\n      // Get the current mouse position\r\n      x: e.clientX,\r\n      y: e.clientY,\r\n    };\r\n\r\n    document.addEventListener(\"mousemove\", mouseMoveHandler);\r\n    document.addEventListener(\"mouseup\", mouseUpHandler);\r\n  };\r\n  const mouseMoveHandler = function (e) {\r\n    // How far the mouse has been moved\r\n    const dx = e.clientX - pos.x;\r\n    const dy = e.clientY - pos.y;\r\n\r\n    // Scroll the element\r\n    ele.scrollTop = pos.top - dy;\r\n    ele.scrollLeft = pos.left - dx;\r\n  };\r\n  const mouseUpHandler = function () {\r\n    ele.style.cursor = \"grab\";\r\n    ele.style.removeProperty(\"user-select\");\r\n\r\n    document.removeEventListener(\"mousemove\", mouseMoveHandler);\r\n    document.removeEventListener(\"mouseup\", mouseUpHandler);\r\n  };\r\n  // Attach the handler\r\n  ele.addEventListener(\"mousedown\", mouseDownHandler);\r\n});\r\n// menu 切換\r\nlet menuOpenBtn = document.querySelector(\".menuToggle\");\r\nlet linkBtn = document.querySelectorAll(\".topBar-menu a\");\r\nlet menu = document.querySelector(\".topBar-menu\");\r\nmenuOpenBtn.addEventListener(\"click\", menuToggle);\r\n\r\nlinkBtn.forEach((item) => {\r\n  item.addEventListener(\"click\", closeMenu);\r\n});\r\n\r\nfunction menuToggle() {\r\n  if (menu.classList.contains(\"openMenu\")) {\r\n    menu.classList.remove(\"openMenu\");\r\n  } else {\r\n    menu.classList.add(\"openMenu\");\r\n  }\r\n}\r\nfunction closeMenu() {\r\n  menu.classList.remove(\"openMenu\");\r\n}\r\n\r\n// 自己寫的------------------------------------------------------------------\r\nconsole.clear();\r\nconst path = \"jiji\";\r\n// const UID = \"BIjsJ95UFOcuAi0s85Yq6IlkDsB3\";\r\nconst base = \"https://livejs-api.hexschool.io\";\r\n\r\nconst pdlist = document.querySelector(\".productWrap\");\r\nlet data = [];\r\n// 取得商品列表\r\nconst productList = () => {\r\n  axios\r\n    .get(`${base}/api/livejs/v1/customer/${path}/products`)\r\n    .then((response) => {\r\n      data = response.data.products;\r\n      renderCard(data);\r\n    })\r\n    .catch((error) => {\r\n      console.log(error.response.data);\r\n    });\r\n};\r\nproductList();\r\n// 篩選條件\r\nconst filter = document.querySelector(\".productSelect\");\r\nfilter.addEventListener(\"click\", function (e) {\r\n  data.forEach((item) => {\r\n    if (e.target.value == \"全部\") {\r\n      renderCard(data);\r\n    } else if (e.target.value == item.category) {\r\n      let tempData = [];\r\n      data.forEach((item) => {\r\n        if (e.target.value == item.category) tempData.push(item);\r\n      });\r\n      renderCard(tempData);\r\n    }\r\n  });\r\n});\r\n// 渲染商品列表\r\nconst renderCard = (renderData) => {\r\n  let str = \"\";\r\n  renderData.forEach((item) => {\r\n    str += `<li class=\"productCard\"><h4 class=\"productType\">新品</h4><img\r\n    src=${item.images} alt=\"#\"/><a data-content=${\r\n      item.id\r\n    } class=\"addCardBtn\">加入購物車</a><h3>${\r\n      item.title\r\n    }</h3><del class=\"originPrice\">NT$${item.origin_price.toLocaleString()}</del><p class=\"nowPrice\">NT$${item.price.toLocaleString()}</p></li>`;\r\n  });\r\n  pdlist.innerHTML = str;\r\n};\r\n// 加入購物車\r\npdlist.addEventListener(\"click\", function (e) {\r\n  if (e.target.nodeName == \"A\") {\r\n    let qt = 0;\r\n    let pdid = e.target.dataset.content;\r\n    ctData.forEach((item) => {\r\n      if (item.product.id == pdid) {\r\n        qt = item.quantity;\r\n      }\r\n    });\r\n    qt++;\r\n    addCart(e.target.dataset.content, qt);\r\n  }\r\n});\r\nconst addCart = (pdid, qt) => {\r\n  axios\r\n    .post(`${base}/api/livejs/v1/customer/${path}/carts`, {\r\n      data: {\r\n        productId: pdid,\r\n        quantity: qt,\r\n      },\r\n    })\r\n    .then(function (response) {\r\n      // console.log(response.data);\r\n      cartList();\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error.response.data);\r\n    });\r\n};\r\n// 取得購物車\r\nconst ctList = document.querySelector(\".shoppingCart-table\");\r\nlet ctData = [];\r\nconst cartList = () => {\r\n  axios\r\n    .get(`${base}/api/livejs/v1/customer/${path}/carts`)\r\n    .then((response) => {\r\n      ctData = response.data.carts;\r\n      let str = `<tr>\r\n        <th width=\"40%\">品項</th>\r\n        <th width=\"15%\">單價</th>\r\n        <th width=\"15%\">數量</th>\r\n        <th width=\"15%\">金額</th>\r\n        <th width=\"15%\"></th>\r\n      </tr>`;\r\n      ctData.forEach((item) => {\r\n        str += `<tr>\r\n          <td>\r\n            <div class=\"cardItem-title\">\r\n              <img src=${item.product.images} alt=\"#\" />\r\n              <p>${item.product.title}</p>\r\n            </div>\r\n          </td>\r\n          <td>NT$${item.product.price.toLocaleString()}</td>\r\n          <td>${item.quantity}</td>\r\n          <td>NT$${(item.product.price * item.quantity).toLocaleString()}</td>\r\n          <td class=\"discardBtn\">\r\n            <a data-did=${item.id} class=\"material-icons\"> clear </a>\r\n          </td>\r\n        </tr>`;\r\n      });\r\n      str += `<tr>\r\n        <td>\r\n          <a class=\"discardAllBtn\">刪除所有品項</a>\r\n        </td>\r\n        <td></td>\r\n        <td></td>\r\n        <td>\r\n          <p>總金額</p>\r\n        </td>\r\n        <td>NT$${response.data.finalTotal.toLocaleString()}</td>\r\n      </tr>`;\r\n      ctList.innerHTML = str;\r\n    })\r\n    .catch((error) => {\r\n      console.log(error.response.data);\r\n    });\r\n};\r\ncartList();\r\n\r\nctList.addEventListener(\"click\", function (e) {\r\n  let done = \"\";\r\n  let dall = \"\";\r\n  if (e.target.classList.value == \"material-icons\") {\r\n    done = e.target.dataset.did;\r\n    deleteOne(done);\r\n  }\r\n  if (e.target.classList.value == \"discardAllBtn\") {\r\n    dall = e.target.dataset.did;\r\n    deleteAll();\r\n  }\r\n});\r\n// 刪除購物車部分產品\r\nconst deleteOne = (cartid) => {\r\n  axios\r\n    .delete(`${base}/api/livejs/v1/customer/${path}/carts/${cartid}`)\r\n    .then(function (response) {\r\n      cartList();\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error.response.data);\r\n    });\r\n};\r\n// 刪除全部購物車\r\nconst deleteAll = () => {\r\n  axios\r\n    .delete(`${base}/api/livejs/v1/customer/${path}/carts`)\r\n    .then(function (response) {\r\n      cartList();\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error.response.data);\r\n    });\r\n};\r\n\r\n// 送出購買訂單\r\nconst orderForm = document.querySelector(\".orderInfo-form\");\r\nconst fname =document.querySelector(\"#customerName\");\r\nconst ftel =document.querySelector(\"#customerPhone\");\r\nconst fmail = document.querySelector(\"#customerEmail\");\r\nconst fadr = document.querySelector(\"#customerAddress\");\r\nconst fpay= document.querySelector(\"#tradeWay\");\r\nconst fbtn = document.querySelector(\".orderInfo-btn\");\r\nfbtn.addEventListener('click',function(e){\r\n  if(fname.value.length<1){\r\n    alert(\"請填寫姓名\");\r\n  }else if(ftel.value.length<1){\r\n    alert(\"請填寫電話\");\r\n  }else if(fmail.value<1){\r\n    alert(\"請輸入Email\");\r\n  }else if(fadr.value<1){\r\n    alert(\"請輸入寄送地址\");\r\n  }else{\r\n    let sname=fname.value;\r\n    let stel=ftel.value;\r\n    let smail=fmail.value;\r\n    let sadr=fadr.value;\r\n    let spay=fpay.value;\r\n    sendOrder(sname,stel,smail,sadr,spay);\r\n  }\r\n})\r\nconst sendOrder = (fname,ftel,femail,faddress,fpayment) => {\r\n  axios\r\n    .post(`${base}/api/livejs/v1/customer/${path}/orders`, {\r\n      data: {\r\n        user: {\r\n          name: fname,\r\n          tel: ftel,\r\n          email: femail,\r\n          address: faddress,\r\n          payment: fpayment,\r\n        },\r\n      },\r\n    })\r\n    .then(function (response) {\r\n      console.log(response.data);\r\n      cartList();\r\n      orderForm.reset();  \r\n      alert(\"寄送成功!\");\r\n    })\r\n    .catch(function (error) {\r\n      alert(error.response.data.message);\r\n    });\r\n};\r\n"]}